model_version: "1.0"
intake:
  id: support-ticket
  name: Submit Support Request
  description: Submit a support request and we'll get back to you within 24 hours.
  version: 1.0.0

  # Public form settings
  public: true
  slug: support

  # Branding
  branding:
    title: "How can we help?"
    subtitle: "Describe your issue and we'll get back to you as soon as possible."
    logo: true
    powered_by: true

  # Issue creation settings
  issue:
    type: support_ticket
    workflow: support
    initial_state: submitted
    title_template: "[Support] {{subject}}"

  # Form fields
  fields:
    - key: customer_name
      type: string
      label: Your Name
      placeholder: "John Smith"
      required: true
      map_to: custom_fields.customer_name

    - key: customer_email
      type: email
      label: Email Address
      placeholder: "john@example.com"
      required: true
      map_to: custom_fields.customer_email
      validation:
        pattern: "^[^@]+@[^@]+\\.[^@]+$"
        message: "Please enter a valid email address"

    - key: subject
      type: string
      label: Subject
      placeholder: "Brief description of your issue"
      required: true
      max_length: 200
      map_to: title

    - key: category
      type: enum
      label: Category
      required: true
      options:
        - value: bug
          label: "üêõ Bug Report"
          description: "Something isn't working correctly"
        - value: feature_request
          label: "‚ú® Feature Request"
          description: "Suggest a new feature or improvement"
        - value: question
          label: "‚ùì Question"
          description: "General question about using Kiket"
        - value: account
          label: "üë§ Account Issue"
          description: "Login, permissions, or account settings"
        - value: billing
          label: "üí≥ Billing"
          description: "Invoices, payments, or subscription"
      map_to: custom_fields.category

    - key: description
      type: markdown
      label: Description
      placeholder: |
        Please describe your issue in detail:
        - What were you trying to do?
        - What happened instead?
        - Any error messages?
      required: true
      min_length: 50
      max_length: 5000
      map_to: description

    - key: priority
      type: enum
      label: Urgency
      required: false
      default: medium
      options:
        - value: low
          label: "Low - Not urgent"
        - value: medium
          label: "Medium - Affecting my work"
        - value: high
          label: "High - Blocking important work"
        - value: critical
          label: "Critical - Production down"
      map_to: custom_fields.priority

    - key: attachments
      type: file
      label: Attachments
      description: "Screenshots, logs, or other files that help explain the issue"
      required: false
      multiple: true
      max_size: 10MB
      allowed_types: [image/*, application/pdf, text/plain, text/csv]

  # Confirmation settings
  confirmation:
    title: "Thanks for reaching out!"
    message: |
      We've received your support request and will get back to you within 24 hours.

      **Your ticket number:** #{{issue.id}}

      You'll receive email updates as we work on your request.
    show_ticket_link: true

  # Notifications
  notifications:
    on_submit:
      - type: email
        to: "{{customer_email}}"
        template: support_ticket_received
      - type: slack
        channel: "#support-queue"
        message: "New support ticket from {{customer_name}}: {{subject}}"

  # Rate limiting
  rate_limit:
    max_submissions: 5
    window: 1h
    message: "You've submitted too many requests. Please wait before submitting another."

  # Spam protection
  spam_protection:
    honeypot: true
    recaptcha: false  # Optional: enable for high-traffic forms
